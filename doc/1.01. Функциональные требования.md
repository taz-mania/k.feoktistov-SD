### 1.1. Функциональные требования (FR)

#### Пользовательские сценарии (User Scenarios)

| ID | Сценарий | Актор | Описание |
|---|---|---|---|
| **UC-1** | Проверка наличия конкретного товара в конкретном магазине | Клиент (МП) | Пользователь просматривает карточку товара и проверяет наличие на полках в выбранном магазине с привязкой к торговому залу (не относится к складу) |
| **UC-2** | Поиск ближайшего магазина с наличием необходимого товара | Клиент (МП) | Геопоиск магазинов в радиусе ## км, где искомый товар физически присутствует на полке и не зарезервирован |
| **UC-3** | Проверка наличия товара сотрудником торгового зала | Продавец (ТСД) | Сканирование SKU для подтверждения фактического наличия на полке, коррекция остатков при пересортице |
| **UC-4** | Резервирование товара конкретного товара под заказ | Система OMS | Бронирование единиц на полке при оформлении самовывоза из магазина или экспресс-доставки |
| **UC-5** | Уведомление о появлении необходимого товара в ближайшем или конкретном магазине | Клиент (МП) | Подписка на уведомление при поступлении товара на полку конкретного магазина или ближайшего к установленной точки в радиусе ## км |

#### Системные функции (API & Интеграции)

| ID | Функция | Категория | Описание |
|---|---|---|---|
| **SF-1** | Inventory Query API | API | REST/gRPC эндпоинты: `GET /availability/{sku}/{store_id}`, `POST /availability/search` (batch запросы) |
| **SF-2** | POS Integration | Интеграция | Потоковая интеграция с кассовыми терминалами (POS) для событий продаж в реальном времени |
| **SF-3** | WMS Integration | Интеграция | Интеграция с WMS для учета перемещений со склада на полку (replenishment), инвентаризаций |
| **SF-4** | Conflict Resolution Engine | Алгоритм | Разрешение конфликтов между источниками истины (POS продажа vs WMS списание) с приоритетом POS |
| **SF-5** | Cache Management | Инфраструктура | Управление распределенным кэшем с TTL и proactive invalidation |
| **SF-6** | Geo-Index Service | Сервис | Поддержка пространственного индекса для геопоиска с фильтрацией по наличию |
